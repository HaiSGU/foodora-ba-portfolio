<mxfile host="Electron" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/29.0.3 Chrome/140.0.7339.249 Electron/38.7.0 Safari/537.36" version="29.0.3">
  <diagram id="erd-foodora-mvp" name="ERD - Foodora MVP">
    <mxGraphModel dx="6405" dy="4210" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1920" pageHeight="1080" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" value="&lt;div style=&quot;font-size:20px;&quot;&gt;&lt;b&gt;ERD — FOODORA Pickup MVP&lt;/b&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=middle;spacing=6;fillColor=none;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="1020" y="-540" width="600" height="40" as="geometry" />
        </mxCell>
        <mxCell id="legend" value="&lt;div style=&quot;font-size:13px;&quot;&gt;&lt;b&gt;Legend&lt;/b&gt;&lt;br/&gt;• PK = Primary Key&lt;br/&gt;• FK = Foreign Key&lt;br/&gt;• Edge label shows target multiplicity: 1..n, 0..1, 0..n&lt;br/&gt;• MVP scope: pay-at-counter (Phase 1)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;verticalAlign=top;spacing=10;fillColor=#f3f4f6;strokeColor=#9ca3af;" parent="1" vertex="1">
          <mxGeometry x="2190" y="-70" width="330" height="130" as="geometry" />
        </mxCell>
        <mxCell id="user" value="&lt;div&gt;&lt;table style=&quot;border-collapse:collapse;width:100%;font-size:13px;&quot;&gt;&lt;tr&gt;&lt;th colspan=&quot;2&quot; style=&quot;background:#e5e7eb;border:1px solid #111;padding:6px 8px;text-align:center;font-weight:700;&quot;&gt;User&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width:52px;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;PK&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;user_id (UUID)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;phone (unique)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;full_name&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;role (CUSTOMER/CASHIER/ADMIN)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;created_at&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;spacing=0;fillColor=#ffffff;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry y="-90" width="300" height="170" as="geometry" />
        </mxCell>
        <mxCell id="restaurant" value="&lt;div&gt;&lt;table style=&quot;border-collapse:collapse;width:100%;font-size:13px;&quot;&gt;&lt;tr&gt;&lt;th colspan=&quot;2&quot; style=&quot;background:#e5e7eb;border:1px solid #111;padding:6px 8px;text-align:center;font-weight:700;&quot;&gt;Restaurant&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width:52px;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;PK&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;restaurant_id (UUID)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;name&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;address&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;phone&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;timezone&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;pickup_slot_interval_minutes&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;max_orders_per_slot (nullable)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;created_at&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;spacing=0;fillColor=#ffffff;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="590" y="-450" width="250" height="170" as="geometry" />
        </mxCell>
        <mxCell id="restaurant_hours" value="&lt;div&gt;&lt;table style=&quot;border-collapse:collapse;width:100%;font-size:13px;&quot;&gt;&lt;tr&gt;&lt;th colspan=&quot;2&quot; style=&quot;background:#e5e7eb;border:1px solid #111;padding:6px 8px;text-align:center;font-weight:700;&quot;&gt;RestaurantBusinessHour&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width:52px;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;PK&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;business_hour_id (UUID)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;FK1&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;restaurant_id → Restaurant&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;day_of_week (0..6)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;open_time&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;close_time&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;is_closed&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;updated_at&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;spacing=0;fillColor=#ffffff;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="90" y="-460" width="240" height="190" as="geometry" />
        </mxCell>
        <mxCell id="pickup_slot" value="&lt;div&gt;&lt;table style=&quot;border-collapse:collapse;width:100%;font-size:13px;&quot;&gt;&lt;tr&gt;&lt;th colspan=&quot;2&quot; style=&quot;background:#e5e7eb;border:1px solid #111;padding:6px 8px;text-align:center;font-weight:700;&quot;&gt;PickupTimeSlot&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width:52px;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;PK&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;pickup_slot_id (UUID)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;FK1&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;restaurant_id → Restaurant&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;slot_start_at&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;slot_end_at&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;capacity (nullable)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;created_at&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;spacing=0;fillColor=#ffffff;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="1590" y="-410" width="230" height="180" as="geometry" />
        </mxCell>
        <mxCell id="staff" value="&lt;div&gt;&lt;table style=&quot;border-collapse:collapse;width:100%;font-size:13px;&quot;&gt;&lt;tr&gt;&lt;th colspan=&quot;2&quot; style=&quot;background:#e5e7eb;border:1px solid #111;padding:6px 8px;text-align:center;font-weight:700;&quot;&gt;RestaurantStaff&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width:52px;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;PK&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;staff_id (UUID)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;FK1&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;restaurant_id → Restaurant&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;FK2&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;user_id → User&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;staff_role (CASHIER/MANAGER)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;is_active&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;created_at&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;spacing=0;fillColor=#ffffff;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="990" y="-60" width="260" height="190" as="geometry" />
        </mxCell>
        <mxCell id="menu" value="&lt;div&gt;&lt;table style=&quot;border-collapse:collapse;width:100%;font-size:13px;&quot;&gt;&lt;tr&gt;&lt;th colspan=&quot;2&quot; style=&quot;background:#e5e7eb;border:1px solid #111;padding:6px 8px;text-align:center;font-weight:700;&quot;&gt;Menu&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width:52px;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;PK&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;menu_id (UUID)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;FK1&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;restaurant_id → Restaurant&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;name&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;is_active&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;updated_at&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;spacing=0;fillColor=#ffffff;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="1270" y="280" width="320" height="150" as="geometry" />
        </mxCell>
        <mxCell id="category" value="&lt;div&gt;&lt;table style=&quot;border-collapse:collapse;width:100%;font-size:13px;&quot;&gt;&lt;tr&gt;&lt;th colspan=&quot;2&quot; style=&quot;background:#e5e7eb;border:1px solid #111;padding:6px 8px;text-align:center;font-weight:700;&quot;&gt;MenuCategory&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width:52px;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;PK&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;category_id (UUID)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;FK1&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;menu_id → Menu&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;name&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;sort_order&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;is_active&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;spacing=0;fillColor=#ffffff;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="50" y="280" width="200" height="150" as="geometry" />
        </mxCell>
        <mxCell id="item" value="&lt;div&gt;&lt;table style=&quot;border-collapse:collapse;width:100%;font-size:13px;&quot;&gt;&lt;tr&gt;&lt;th colspan=&quot;2&quot; style=&quot;background:#e5e7eb;border:1px solid #111;padding:6px 8px;text-align:center;font-weight:700;&quot;&gt;MenuItem&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width:52px;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;PK&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;item_id (UUID)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;FK1&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;category_id → MenuCategory&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;name&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;price_amount&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;currency&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;is_available&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;updated_at&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;spacing=0;fillColor=#ffffff;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="25" y="530" width="250" height="190" as="geometry" />
        </mxCell>
        <mxCell id="order" value="&lt;div&gt;&lt;table style=&quot;border-collapse:collapse;width:100%;font-size:13px;&quot;&gt;&lt;tr&gt;&lt;th colspan=&quot;2&quot; style=&quot;background:#e5e7eb;border:1px solid #111;padding:6px 8px;text-align:center;font-weight:700;&quot;&gt;Order&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width:52px;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;PK&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;order_id (UUID)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;FK1&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;restaurant_id → Restaurant&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;FK2&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;customer_user_id → User&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;FK3&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;pickup_slot_id → PickupTimeSlot&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;status (PLACED/CONFIRMED/PREPARING/READY/COMPLETED/CANCELLED)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;pickup_time (snapshot)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;customer_note&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;subtotal_amount&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;total_amount&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;currency&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;confirmed_at (nullable)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;preparing_at (nullable)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;ready_at (nullable)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;completed_at (nullable)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;cancelled_at (nullable)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;cancelled_by (CUSTOMER/RESTAURANT)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;cancel_reason (nullable)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;created_at&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;updated_at&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;spacing=0;fillColor=#ffffff;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="1660" y="360" width="520" height="250" as="geometry" />
        </mxCell>
        <mxCell id="order_item" value="&lt;div&gt;&lt;table style=&quot;border-collapse:collapse;width:100%;font-size:13px;&quot;&gt;&lt;tr&gt;&lt;th colspan=&quot;2&quot; style=&quot;background:#e5e7eb;border:1px solid #111;padding:6px 8px;text-align:center;font-weight:700;&quot;&gt;OrderItem&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width:52px;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;PK&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;order_item_id (UUID)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;FK1&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;order_id → Order&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;FK2&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;item_id → MenuItem&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;name_snapshot&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;unit_price_amount (snapshot)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;currency&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;quantity&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;item_note&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;line_total_amount&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;spacing=0;fillColor=#ffffff;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="990" y="790" width="260" height="210" as="geometry" />
        </mxCell>
        <mxCell id="payment" value="&lt;div&gt;&lt;table style=&quot;border-collapse:collapse;width:100%;font-size:13px;&quot;&gt;&lt;tr&gt;&lt;th colspan=&quot;2&quot; style=&quot;background:#e5e7eb;border:1px solid #111;padding:6px 8px;text-align:center;font-weight:700;&quot;&gt;Payment&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width:52px;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;PK&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;payment_id (UUID)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;FK1&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;order_id → Order (unique)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;FK2&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;received_by_user_id → User (nullable)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;method (PAY_AT_COUNTER)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;status (PENDING/PAID/VOIDED)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;amount&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;currency&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;paid_at (nullable)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;created_at&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;spacing=0;fillColor=#ffffff;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="480" y="790" width="330" height="190" as="geometry" />
        </mxCell>
        <mxCell id="status_history" value="&lt;div&gt;&lt;table style=&quot;border-collapse:collapse;width:100%;font-size:13px;&quot;&gt;&lt;tr&gt;&lt;th colspan=&quot;2&quot; style=&quot;background:#fff0d6;border:1px solid #111;padding:6px 8px;text-align:center;font-weight:700;&quot;&gt;OrderStatusHistory&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width:52px;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;PK&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;status_history_id (UUID)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;font-weight:700;text-align:center;&quot;&gt;FK1&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;order_id → Order&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;from_status&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;to_status&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;changed_by_user_id (nullable)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;&lt;/td&gt;&lt;td style=&quot;border:1px solid #111;padding:4px 6px;&quot;&gt;changed_at&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;spacing=0;fillColor=#fff7e6;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="2260" y="395" width="380" height="180" as="geometry" />
        </mxCell>
        <mxCell id="e_restaurant_menu" value="0..n" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;strokeWidth=2;" parent="1" source="restaurant" target="menu" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1470" y="-370" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e_menu_category" value="0..n" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;strokeWidth=2;" parent="1" source="menu" target="category" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_category_item" value="0..n" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;strokeWidth=2;" parent="1" source="category" target="item" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_user_order" value="0..n" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;strokeWidth=2;" parent="1" source="user" target="order" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="750" y="30" />
              <mxPoint x="750" y="450" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e_restaurant_order" value="0..n" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;strokeWidth=2;" parent="1" source="restaurant" target="order" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="850" y="250" />
              <mxPoint x="1750" y="250" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e_order_orderitem" value="1..n" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;strokeWidth=2;" parent="1" source="order" target="order_item" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_item_orderitem" value="0..n" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;strokeWidth=2;" parent="1" source="item" target="order_item" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1140" y="625" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e_order_payment" value="0..1" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;strokeWidth=2;" parent="1" source="order" target="payment" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="740" y="510" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e_restaurant_staff" value="0..n" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;strokeWidth=2;" parent="1" source="restaurant" target="staff" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1210" y="-420" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e_restaurant_hours" value="0..n" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;strokeWidth=2;" parent="1" source="restaurant" target="restaurant_hours" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_restaurant_pickupslot" value="0..n" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;strokeWidth=2;exitX=0.995;exitY=0.868;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="restaurant" target="pickup_slot" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="920" y="-365" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="920" y="-302" />
              <mxPoint x="920" y="-300" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e_pickupslot_order" value="0..n" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;strokeWidth=2;" parent="1" source="pickup_slot" target="order" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_user_staff" value="0..n" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;strokeWidth=2;" parent="1" source="user" target="staff" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="735" y="-10" />
              <mxPoint x="735" y="-5" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e_order_statushist" value="0..n" style="edgeStyle=orthogonalEdgeStyle;endArrow=block;html=1;rounded=0;strokeWidth=2;" parent="1" source="order" target="status_history" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="note" value="&lt;div style=&quot;font-size:13px;&quot;&gt;&lt;b&gt;Notes (Aligned with PRD/Use Cases)&lt;/b&gt;&lt;br/&gt;• Pay-at-counter (Phase 1) → Payment.method = PAY_AT_COUNTER; Payment is optional until paid&lt;br/&gt;• Status lifecycle: PLACED → CONFIRMED → PREPARING → READY → COMPLETED (+ CANCELLED)&lt;br/&gt;• Customer can cancel only when status = PLACED (UC09)&lt;br/&gt;• Restaurant reject/cancel before READY requires reason (UC14); after READY cancellation may be restricted (optional)&lt;br/&gt;• Pickup slots: generated from business hours + interval; no past slots; optional capacity cap per slot&lt;br/&gt;• Record timestamps (confirmed_at/ready_at/completed_at/cancelled_at) and operator in audit (see OrderStatusHistory)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;verticalAlign=top;spacing=10;fillColor=#e1f5fe;strokeColor=#0288d1;" parent="1" vertex="1">
          <mxGeometry x="35" y="810" width="330" height="300" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
